#!/bin/sh

[[ "$SVN_USER" == "" ]] && echo "\$SVN_USER not defined!" && exit

#[[ "$1" = "OLD" ]] && SVN_ADMIN_URL=$SVN_ADMIN_OLD # REST API Started with Subversion Edge 2.2
[[ "$SVN_ADMIN_URL" = "" ]] && echo "Var SVN_ADMIN_URL is not detected ! Run at first: . varadd SVN_ADMIN_URL '<url with port>'" && exit 1

echo -n Enter password for $SVN_USER: && read -s PASSWORD && echo
echo "reading repo list for $SVN_ADMIN_URL..."

curl -u $SVN_USER:$PASSWORD "$SVN_ADMIN_URL"/csvn/api/1/repository?format=json -k -s | jq '.repositories | .[] | .name'
# -v
# "id" "status" "svnUrl"
